---
  - hosts: all
    strategy: free
    tasks:
    - name: Install LinuxPTP
      include_role:
        name: /home/mfuser/mf_git/instrumentize/ptp/ansible/roles/linuxptp

    - name: Install PIP3
      package:
        name: python3-pip
        state: present

    - name: Upgrade pip3 to latest version and install Python Docker SDK
      pip:
        name: "{{ item }}"
        executable: pip3
        state: latest    
      with_items:
          - 'pip'
          - 'docker'

    - name: Install Docker
      include_role:
        name: 'geerlingguy.docker'
      vars:
        docker_daemon_options:
            registry-mirrors: 
              - "{{ 'https://registry.'+management_ip_type|lower+'.docker.com' }}"
