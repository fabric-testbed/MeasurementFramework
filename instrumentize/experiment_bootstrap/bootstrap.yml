# Installs Docker
- name: Install Docker 
  hosts: all
  roles:
    - role: /home/mfuser/mf_git/instrumentize/ptp/ansible/roles/linuxptp
  tasks:
  # Installs the Docker.
  - name: Install Docker
    include_role:
      name: geerlingguy.docker

  - name: Enable Docker IPv6 repos
    copy:
      dest: "/etc/docker/daemon.json"
      content: |
        {"registry-mirrors": ["https://registry.ipv6.docker.com"]}

  - name: Restart Docker
    systemd:
      state: restarted
      name: docker

#Install pip3 and python docker sdk 
  # Installs Pip3
  - name: Install PIP3
    package:
      name: python3-pip
      state: present

  # Installs Python Docker SDK
  - name: Install Python Docker SDK
    pip:
      name: "{{ item }}"
      executable: pip3
      state: latest    
    with_items:
        - 'pip'
        - 'docker'
