# Create data transfer service
---
- name: Create data transfer service
  hosts: Meas_Node
  tasks:
    - name: Create a build directory
      ansible.builtin.file:
        path: /home/ubuntu/data_transfer
        state: directory
        mode: '0755'

    - name: copy Dockerfile
      ansible.builtin.copy:
        src: /home/mfuser/mf_git/user_services/data_transfer/data_transfer/dockerfile/Dockerfile
        dest: /home/ubuntu/data_transfer/Dockerfile
        mode: '0644'

    - name: build container image
      community.docker.docker_image:
        name: data_transfer:1.0
        build:
          path: /home/ubuntu/data_transfer
        source: build